# define the Context
ctx -s fasta=/Users/ptommaso/Downloads/Support/sample/sample.fa
ctx -s DB=/Users/ptommaso/tools/blast-db/pdb/pdb

## Split the FASTA file
sub --produce seq:seq_* --print "gcsplit $fasta '%^>%' '/^>/' '{*}' -f seq_"

## execute a BLAST foreach sequence
sub --each seq 'blastp -db $DB -query $seq -outfmt 6 > blast_result' --produce blast_result

## collect the result, sort and print it 
sub 'sort $blast_result | cat -'  --print
